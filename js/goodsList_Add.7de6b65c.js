(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goodsList_Add"],{"040f":function(e,t,r){},2374:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首頁")]),r("el-breadcrumb-item",[e._v("商品管理")]),!0===this.isNew?r("el-breadcrumb-item",[e._v(e._s(e.addWord))]):r("el-breadcrumb-item",[e._v(e._s(e.modifyWord))])],1),r("el-card",[!0===this.isNew?r("el-alert",{attrs:{title:"新增商品資訊",type:"info",center:"","show-icon":"",closable:!1}}):r("el-alert",{attrs:{title:"修改商品資訊",type:"info",center:"","show-icon":"",closable:!1}}),r("el-steps",{attrs:{active:e.activeIndex-0,"finish-status":"success",space:500,"align-center":""}},[r("el-step",{attrs:{title:"基本資料"}}),r("el-step",{attrs:{title:"商品內容"}}),r("el-step",{attrs:{title:"完成"}})],1),r("el-form",{ref:"ruleForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px","label-position":"top"}},[r("el-tabs",{attrs:{"tab-position":"left","before-leave":e.beforeTabLeave},model:{value:e.activeIndex,callback:function(t){e.activeIndex=t},expression:"activeIndex"}},[r("el-tab-pane",{attrs:{label:"基本訊息",name:"0"}},[e._v("基本訊息 "),r("el-form-item",{attrs:{label:"商品名稱",prop:"name"}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),r("el-form-item",{attrs:{label:"商品價格",prop:"price"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1),r("el-form-item",{attrs:{label:"商品數量",prop:"quantity"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addForm.quantity,callback:function(t){e.$set(e.addForm,"quantity",t)},expression:"addForm.quantity"}})],1),r("el-form-item",{attrs:{label:"商品分類",prop:"categoryId"}},[r("el-cascader",{attrs:{options:e.categoryList,props:e.categoryProps},on:{change:e.handleChange},model:{value:e.addForm.categoryId,callback:function(t){e.$set(e.addForm,"categoryId",t)},expression:"addForm.categoryId"}})],1)],1),r("el-tab-pane",{attrs:{label:"商品內容",name:"2"}},[r("quill-editor",{model:{value:e.addForm.context,callback:function(t){e.$set(e.addForm,"context",t)},expression:"addForm.context"}}),r("el-button",{staticClass:"btnAdd",attrs:{type:"primary"},on:{click:e.add}},[e._v("確認")])],1)],1)],1)],1)],1)},n=[],o=r("1da1"),s=(r("96cf"),r("005f")),i={data:function(){return{isNew:null,modifyWord:"修改商品",addWord:"新增商品",activeIndex:"0",addForm:{goodsId:"",name:"",price:0,quantity:0,context:"",categoryId:0},addFormRules:{name:[{required:!0,message:"請輸入商品名稱",trigger:"blur"}],price:[{required:!0,message:"請輸入商品價格",trigger:"blur"}],quantity:[{required:!0,message:"請輸入商品數量",trigger:"blur"}],goods_cat:[{required:!0,message:"請輸入商品分類",trigger:"blur"}]},categoryList:[],categoryProps:{expandTrigger:"hover",label:"name",value:"categoryId",children:"children"}}},created:function(){this.getGoodsData(),this.getCateList()},methods:{getGoodsData:function(){this.isNew=this.$route.params.isNew,void 0===this.isNew&&(this.isNew=!0);var e=this.$route.params.goods;null!=e&&(this.addForm=e)},getCateList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["i"])(s["a"]);case 2:e.categoryList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},handleChange:function(e){this.addForm.categoryId=e[e.length-1]},beforeTabLeave:function(e,t){if("0"===t&&0===this.addForm.categoryId)return this.$message.error("請先選擇商品分類"),!1},addGoods:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["g"])(e.addForm);case 2:if(r=t.sent,a=r.data,200!==a.status){t.next=10;break}return t.next=7,e.$router.push("/goods");case 7:return t.abrupt("return",e.$message.success(e.addWord+"成功"));case 10:return t.abrupt("return",e.$message.error(a.message));case 11:case"end":return t.stop()}}),t)})))()},modifyGood:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["l"])(s["h"],e.addForm.goodsId,e.addForm);case 2:if(r=t.sent,a=r.data,200!==a.status){t.next=10;break}return t.next=7,e.$router.push("/goods");case 7:return t.abrupt("return",e.$message.success(e.modifyWord+"成功"));case 10:return t.abrupt("return",e.$message.error(a.message));case 11:case"end":return t.stop()}}),t)})))()},add:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.ruleForm.validate((function(t){if(!t)return e.$message.error("請輸入必填欄位")}));case 2:if(!e.isNew&&"undefined"!==e.isNew){t.next=7;break}return t.next=5,e.addGoods();case 5:t.next=9;break;case 7:return t.next=9,e.modifyGood();case 9:case"end":return t.stop()}}),t)})))()}}},c=i,l=(r("57c1"),r("2877")),u=Object(l["a"])(c,a,n,!1,null,"6ea4c542",null);t["default"]=u.exports},"57c1":function(e,t,r){"use strict";r("040f")},cb38:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首頁")]),r("el-breadcrumb-item",[e._v("商品管理")]),r("el-breadcrumb-item",[e._v("商品列表")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"請輸入內容",clearable:""},on:{clear:e.getGoodsList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getGoodsList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.goGoodsPage(!0,null)}}},[e._v("新增商品")])],1)],1),r("el-table",{attrs:{data:e.goodsList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"商品名稱",prop:"name"}}),r("el-table-column",{attrs:{label:"商品價格(元)",prop:"price",width:"120px"}}),r("el-table-column",{attrs:{label:"商品數量",prop:"quantity",width:"100px"}}),r("el-table-column",{attrs:{label:"建立時間",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dataFormat")(t.row.createDate))+" ")]}}])}),r("el-table-column",{attrs:{label:"操作",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.goGoodsPage(!1,t.row)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},n=[],o=r("1da1"),s=(r("96cf"),r("005f")),i={data:function(){return{queryInfo:{query:"",pageNum:1,pageSize:5},goodsList:[],total:0,modifyDialogVisible:!1}},methods:{getGoodsList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["f"])(e.queryInfo);case 2:r=t.sent,a=r.data,200===a.status?(e.total=a.total,e.goodsList=a.data):e.$message.error(a.message);case 5:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getGoodsList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getGoodsList()},goGoodsPage:function(e,t){this.$router.push({name:"goods",params:{goods:t,isNew:e}})}},created:function(){this.getGoodsList()}},c=i,l=r("2877"),u=Object(l["a"])(c,a,n,!1,null,"7d6cf44a",null);t["default"]=u.exports}}]);
//# sourceMappingURL=goodsList_Add.7de6b65c.js.map